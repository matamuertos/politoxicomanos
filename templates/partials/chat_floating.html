<div id="chat-float">
    <div id="chat-header">ðŸ’¬ Chat en vivo</div>
    <div id="chat-body"></div>
    <input id="chat-input" type="text" placeholder="Escribe un mensaje...">
</div>

<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
    const chatSocket = io();
    const chatBody = document.getElementById('chat-body');
    const chatInput = document.getElementById('chat-input');

    chatSocket.on('chat_message', (msg) => {
        const line = document.createElement('div');
        line.textContent = msg;
        chatBody.appendChild(line);
        chatBody.scrollTop = chatBody.scrollHeight;
    });

    chatInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            const message = chatInput.value.trim();
            if (message) {
                chatSocket.emit('chat_message', message);
                chatInput.value = '';
            }
        }
    });
</script>

<style>
    #chat-float {
        position: fixed;
        bottom: 10px;
        right: 10px;
        width: 300px;
        background: #111;
        border: 1px solid #444;
        border-radius: 8px;
        color: white;
        font-size: 14px;
        z-index: 9999;
        box-shadow: 0 0 10px #000;
    }
    #chat-header {
        background: #222;
        padding: 8px;
        cursor: move;
        font-weight: bold;
        text-align: center;
        border-bottom: 1px solid #444;
    }
    #chat-body {
        max-height: 200px;
        overflow-y: auto;
        padding: 8px;
    }
    #chat-input {
        width: calc(100% - 16px);
        margin: 8px;
        padding: 5px;
        background: #222;
        border: none;
        color: white;
    }
</style>
